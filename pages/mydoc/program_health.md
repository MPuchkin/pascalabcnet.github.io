---
title: Версия 3.6.4 (будущие изменения)
keywords: code health
last_updated: 05.05.20
sidebar: mydoc_sidebar
permalink: program_health.html
toс: false
folder: mydoc
---

## Здоровье кода PascalABC.NET

Здоровье кода PascalABC.NET - важнейший показатель кода, характеризующий то, используются ли в программе устаревшие конструкции базового Паскаля, или напротив новые конструкции PascalABC.NET, рекомендованные практически для любой программы.

PascalABC.NET создан для того чтобы обучать современному программированию, позволяющему писать лёгкие, компактные и понятные программы. 

Для начинающих подобных средств языка не так много. Это прежде всего описания переменных по мере того как они становятся нужны в коде (внутриблочные описания), 
совмещение описания с инициализацией, автовывод типа при инициализации, описание переменной цикла for в заголовке цикла, а также использование функций ReadInteger и ReadReal вместо процедуры Read для ввода данных и процедуры Print вместо процедуры Write для вывода данных, а также расширенных операторов присваивания += и *=. На более высоком уровне обучения это - использование динамических массивов вместо статических, поскольку именно динамические массивы содержат огромное количество стандартных методов, улучшающих понятность программы.

Пример "плохой" программы в стиле устаревшего базового Паскаля:

```pascal
var i,s,n: integer;
begin
  Write(Введите n: ');
  Read(n);
  for i:=1 to n do
  begin
    s := s + i * i;
    
  end
end.  
```

В массивах-значениях допускается использование различных типов: при использовании целых и вещественных типов результат приводится к вещественному, при ипользовании символов и строк результат приводится к строковому, при использовании объектов базового и производного классов результат приводится к базовому:

```pascal
##
var a := |1,2.5,3|;
var b := |'z','sss','q'|;
var c := |new Person, new Student|;
```

## Запись программ без внешнего begin-end (реализовано)

Для записи программ без внешнего begin-end используется префикс ##

При этом способе записи невозможно использовать описание констант, типов (в т.ч. классов), процедур и функций

Область использования данного способа записи - короткие программ, состоящие из нескольких команд:

```pascal
##
var a := ArrRandomInteger;
a.Println;
a := a[1:] + |a[0]|;
```

## Стандартные функции SeekEof SeekEoln Eoln (реализовано)

Добавлены стандартные функции SeekEof и SeekEoln для совместимости с Delphi

Исправлено поведение стандартной Eoln - теперь на конце файла она возвращает True

## Стандартные функции и операции для матриц и одномерных массивов (реализовано)

```pascal
x in matr

MatrEqual(m,m1)
m.MatrEqual(m1)

ArrEqual(a,a1)
a.ArrEqual(a1)

MatrByRow, MatrByCol - создают матрицу из последовательости

a.Rows a.Cols теперь возвращают массив массивов
```

## Распаковка в переменные из массива и последовательности (не реализовано)

Можно будет производить распаковку значений в переменные из массива и последовательности так как это сейчас осуществляется для кортежей. Несовпадение размеров при этом будет проверяться на этапе выполнения, а не на этапе компиляции.

```pascal
begin
  var a := Arr(1..3);
  var (x,y,z) := a;
  (x,y,z) := a;
  
  var seq := ArrRandomInteger(10).Order.Distinct;
  var (min,min2) := seq;
end.
```

## Расширенный foreach по последовательности кортежей и по словарям (не реализовано)
```pascal
foreach var (i, v)
```

## Тип RealRange (реализовано)

Добавлен стандартный тип RealRange
```pascal
if x in 2.5..3.4 then
  Print(1);
```

## Изменения в GraphWPF (реализовано)

При вызове `DrawGraph` теперь рисуется сетка, оси, заголовок и значения на осях (автоматически)

Имя типа `FontType` заменено на `FontOptions`

`DrawText` и `TextOut` с параметром `FontOptions`

`Font.WithSize`, `Font.WithStyle`, `Font.WithColor`, `Font.WithName`

добавлен класс `Vector` и операции над ним и точкой, создающая функция `Vect`

Метод `Line` - с параметрами-точками (потом надо будет сделать то же для всех примитивов)

Метод `Lines(n)`

`RandomPoint` и `RandomPoints(n)`


## IDE - улучшена подсветка форматных строк (реализовано @Kotov)






{% include links.html %}

