---
title: Версия 3.6.1
keywords: release notes, announcements, what's new, new features
last_updated: 05.01.20
sidebar: mydoc_sidebar
permalink: mydoc_release_notes_3_6_1.html
toс: false
folder: mydoc
---

## Ускорение перенаправленного ввода (реализовано)

В новой версии ввод, перенаправленный из файла, работает в 3-6 раз быстрее (важно для олимпиадных задач).
Это сделано за счёт ручной буферизации ввода (автоматическая в .NET не работает или работает медленно). 

В частности, для сравнения приводится время работы кода в старой и новой версии.
Сравнение проводилось для файла из N=20 млн целых от 1 до 99999, расположенных в одной строке, разделенных одним пробелом.
Компьютер: Intel Core I7 8700 (3.7 ГГц) 16 Гб

|  | Старая версия (a.exe < a.txt) | Старая версия с Assign(input) | Новая версия (a.exe < a.txt)| Новая версия с Assign(input)|
|-------|--------|---------|---------|---------|
| ReadString | 4100 мс | 2100 мс | 910 мс | 390 мс |  
| ReadString.ToIntegers | 6000 мс | 4200 мс | 1280 мс | 780 мс |  
| ReadString.ToIntegers(N) | - | - | 1200 мс | 680 мс |  
| loop N do ReadLexem | - | - | 1640 мс | 1520 мс |  
| loop N do StrToInt(ReadLexem) | - | - | 1920 мс | 1740 мс |  
| loop N do ReadInteger | 6500 мс | 3400 мс | 1120 мс | 560 мс |  
| ReadArrInteger(N) | 6500 мс | 3400 мс | 1150 мс | 580 мс |  

## Pred и Succ с двумя параметрами 

Функция `Pred(c,n)` возвращает символ с кодом на `n` меньше чем у символа `c`.

Функция `Succ(c,n)` возвращает символ с кодом на `n` больше чем у символа `c`.

**Примечание** Определиться с поведением функции `Pred` при получении отрицательного значения. Определиться с поведением функции `Succ` при получении значения, большего 65535 для Unicode.

## s.JoinToString (реализовано)

Старое название метода последовательности `s.JoinIntoString` будет заменено на `s.JoinToString`

## s.IndicesOf (реализовано)

`s.IndicesOf(SubS: string; overlay: boolean := False): array of integer` - новое расширение для строк, реализующее поиск индексов (позиций) вхождения подстроки SubS в строку s. Если задать для параметра `overlay` значение `True`, будут также учтены позиции перекрывающихся вхождений подстроки.

`s.IndicesOf` реализует алгоритм Кнута - Моррисса - Пратта, который дает асимптотическую оценку решения O(n), в то время как примитивный поиск вхождений подстроки в строку имеет оценку O(n<sup>2</sup>). На основе полученного массива индексов можно находить первое, последнее, а также любые другие разновидности наборов вхождений. Позиции в строке s индексируются от нуля.

Для строк небольшой длины расширение `s.Matches(SubS)` работает быстрее, но перекрывающиеся вхождения найти нельзя.

## Методы расширения EachCount, Each (реализовано)

`Arr(1,2,3,2,2,3,1,4).GroupBy(x->x).EachCount.Println` выводит `(1,2) (2,3) (3,2) (4,1)`

`Each` - более общая версия, проектирует группу с данным ключом на произвольное значение:

`a.GroupBy(x->x.year).Each(g->g.Select(x->x.Height).Average).Println` выводит `(1,2) (2,3) (3,2) (4,1)`


{% include links.html %}
